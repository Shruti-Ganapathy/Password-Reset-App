{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\gshru\\\\OneDrive\\\\Desktop\\\\GUVI tasks\\\\password-reset-app\\\\frontend\\\\src\\\\components\\\\ResetPassword.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { useParams } from 'react-router-dom';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { KeyFill } from 'react-bootstrap-icons';\nimport { motion } from 'framer-motion';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ResetPassword() {\n  _s();\n  const {\n    token\n  } = useParams();\n  const [password, setPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n  const [message, setMessage] = useState('');\n  const [isValid, setIsValid] = useState(false);\n  useEffect(() => {\n    const verifyToken = async () => {\n      try {\n        const res = await axios.post('http://localhost:5000/verify-token', {\n          token\n        });\n        if (res.data.message === 'Token valid') setIsValid(true);\n      } catch {\n        setMessage('Invalid or expired token');\n      }\n    };\n    verifyToken();\n  }, [token]);\n  const handleReset = async e => {\n    e.preventDefault();\n    if (password.length < 6) return setMessage('Password must be at least 6 characters');\n    if (password !== confirmPassword) return setMessage(\"Passwords don't match\");\n    try {\n      const res = await axios.post('http://localhost:5000/reset-password', {\n        token,\n        newPassword: password\n      });\n      setMessage(res.data.message);\n    } catch (err) {\n      var _err$response, _err$response$data;\n      setMessage(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || 'Error resetting password');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(motion.div, {\n    className: \"container mt-5\",\n    initial: {\n      opacity: 0,\n      y: 30\n    },\n    animate: {\n      opacity: 1,\n      y: 0\n    },\n    transition: {\n      duration: 0.6\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(KeyFill, {\n        className: \"me-2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 28\n      }, this), \"Reset Password\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }, this), !isValid ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert alert-danger\",\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleReset,\n      className: \"shadow p-4 rounded bg-light\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"New Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          className: \"form-control\",\n          value: password,\n          onChange: e => setPassword(e.target.value),\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Confirm Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          className: \"form-control\",\n          value: confirmPassword,\n          onChange: e => setConfirmPassword(e.target.value),\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"btn btn-success\",\n        children: \"Reset Password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 11\n      }, this), message && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"alert alert-info mt-3\",\n        children: message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 23\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 5\n  }, this);\n}\n_s(ResetPassword, \"ebee8kdQ3X4jdQ9JXB9Ju8cELZI=\", false, function () {\n  return [useParams];\n});\n_c = ResetPassword;\nexport default ResetPassword;\nvar _c;\n$RefreshReg$(_c, \"ResetPassword\");","map":{"version":3,"names":["React","useState","useEffect","axios","useParams","KeyFill","motion","jsxDEV","_jsxDEV","ResetPassword","_s","token","password","setPassword","confirmPassword","setConfirmPassword","message","setMessage","isValid","setIsValid","verifyToken","res","post","data","handleReset","e","preventDefault","length","newPassword","err","_err$response","_err$response$data","response","div","className","initial","opacity","y","animate","transition","duration","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","value","onChange","target","required","_c","$RefreshReg$"],"sources":["C:/Users/gshru/OneDrive/Desktop/GUVI tasks/password-reset-app/frontend/src/components/ResetPassword.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { useParams } from 'react-router-dom';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport { KeyFill } from 'react-bootstrap-icons';\r\nimport { motion } from 'framer-motion';\r\n\r\nfunction ResetPassword() {\r\n  const { token } = useParams();\r\n  const [password, setPassword] = useState('');\r\n  const [confirmPassword, setConfirmPassword] = useState('');\r\n  const [message, setMessage] = useState('');\r\n  const [isValid, setIsValid] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const verifyToken = async () => {\r\n      try {\r\n        const res = await axios.post('http://localhost:5000/verify-token', { token });\r\n        if (res.data.message === 'Token valid') setIsValid(true);\r\n      } catch {\r\n        setMessage('Invalid or expired token');\r\n      }\r\n    };\r\n    verifyToken();\r\n  }, [token]);\r\n\r\n  const handleReset = async (e) => {\r\n    e.preventDefault();\r\n    if (password.length < 6) return setMessage('Password must be at least 6 characters');\r\n    if (password !== confirmPassword) return setMessage(\"Passwords don't match\");\r\n    try {\r\n      const res = await axios.post('http://localhost:5000/reset-password', { token, newPassword: password });\r\n      setMessage(res.data.message);\r\n    } catch (err) {\r\n      setMessage(err.response?.data?.message || 'Error resetting password');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <motion.div className=\"container mt-5\"\r\n      initial={{ opacity: 0, y: 30 }}\r\n      animate={{ opacity: 1, y: 0 }}\r\n      transition={{ duration: 0.6 }}>\r\n      <h2 className=\"mb-4\"><KeyFill className=\"me-2\"/>Reset Password</h2>\r\n      {!isValid ? (\r\n        <div className=\"alert alert-danger\">{message}</div>\r\n      ) : (\r\n        <form onSubmit={handleReset} className=\"shadow p-4 rounded bg-light\">\r\n          <div className=\"form-group mb-3\">\r\n            <label>New Password</label>\r\n            <input type=\"password\" className=\"form-control\" value={password} onChange={e => setPassword(e.target.value)} required />\r\n          </div>\r\n          <div className=\"form-group mb-3\">\r\n            <label>Confirm Password</label>\r\n            <input type=\"password\" className=\"form-control\" value={confirmPassword} onChange={e => setConfirmPassword(e.target.value)} required />\r\n          </div>\r\n          <button type=\"submit\" className=\"btn btn-success\">Reset Password</button>\r\n          {message && <div className=\"alert alert-info mt-3\">{message}</div>}\r\n        </form>\r\n      )}\r\n    </motion.div>\r\n  );\r\n}\r\n\r\nexport default ResetPassword;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}